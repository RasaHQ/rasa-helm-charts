{{- if .Values.studioEnabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: studio-web-client-configmap
data:
  windowVariables: |
    window.API_ENDPOINT = "{{ .Values.config.ingressHost }}/api"; 
    window.KEYCLOAK_URL = "{{ .Values.config.ingressHost }}/auth"; 
    window.KEYCLOAK_REALM = {{ .Values.webClient.environmentVariables.KEYCLOAK_REALM | quote }}; 
    window.KEYCLOAK_CLIENT_ID = {{ .Values.webClient.environmentVariables.KEYCLOAK_CLIENT_ID | quote }};
    window.FEATURE_FLAG_FLOWS = {{ .Values.webClient.environmentVariables.FEATURE_FLAG_FLOWS | default true | quote }};
    window.FEATURE_FLAG_TRY_ASSISTANT = {{ .Values.webClient.environmentVariables.FEATURE_FLAG_TRY_ASSISTANT | default true | quote }};
    window.FEATURE_FLAG_TRAINING = {{ .Values.webClient.environmentVariables.FEATURE_FLAG_TRAINING | default true | quote }};
    {{- with .Values.webClient.environmentVariables.CURRENT_VERSION_NUMBER }}
    window.CURRENT_VERSION_NUMBER = {{ . | quote | trim }};
    {{- else }}
    window.CURRENT_VERSION_NUMBER = {{ .Values.tag | quote | trim }};
    {{- end }}
{{- end }}
