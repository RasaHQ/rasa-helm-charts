{{- if .Values.studioEnabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: studio-web-client-configmap
data:
  windowVariables: |
    window.API_ENDPOINT = "{{ .Values.config.connectionType }}://{{ .Values.config.ingressHost }}/api";
    window.KEYCLOAK_URL = "{{ .Values.config.connectionType }}://{{ .Values.config.ingressHost }}/auth";
    window.KEYCLOAK_REALM = {{ .Values.webClient.environmentVariables.KEYCLOAK_REALM | quote }};
    window.KEYCLOAK_CLIENT_ID = {{ .Values.webClient.environmentVariables.KEYCLOAK_CLIENT_ID | quote }};
    window.SYSTEM_FLOWS_ENABLED = {{ .Values.webClient.environmentVariables.SYSTEM_FLOWS_ENABLED | quote | default "false" }};
    window.VERSION_CONTROL_ENABLED = {{ .Values.webClient.environmentVariables.VERSION_CONTROL_ENABLED | quote | default "false" }};
    window.BUTTON_PAYLOADS_ENABLED = {{ .Values.webClient.environmentVariables.BUTTON_PAYLOADS_ENABLED | quote | default "false" }};
    {{- with .Values.webClient.environmentVariables.CURRENT_VERSION_NUMBER }}
    window.CURRENT_VERSION_NUMBER = {{ . | quote | trim }};
    {{- else }}
    window.CURRENT_VERSION_NUMBER = {{ .Values.tag | quote | trim }};
    {{- end }}
{{- end }}
