apiVersion: v1
kind: ConfigMap
metadata:
  name: studio-web-client-configmap
data:
  windowVariables: |
    window.API_ENDPOINT = "{{ .Values.config.connectionType }}://{{ if .Values.backend.ingress.hostName }}{{ .Values.backend.ingress.hostName }}{{ else }}{{ .Values.config.ingressHost }}{{ end }}/api";
    window.KEYCLOAK_URL = "{{ .Values.config.connectionType }}://{{ if .Values.keycloak.ingress.hostName }}{{ .Values.keycloak.ingress.hostName }}{{ else }}{{ .Values.config.ingressHost }}{{ end }}/auth";
    window.KEYCLOAK_REALM = {{ .Values.webClient.environmentVariables.KEYCLOAK_REALM | quote }};
    window.KEYCLOAK_CLIENT_ID = {{ .Values.webClient.environmentVariables.KEYCLOAK_CLIENT_ID | quote }};
    window.VERSION_CONTROL_ENABLED = {{ .Values.webClient.environmentVariables.VERSION_CONTROL_ENABLED | quote | default "false" }};
    window.CMS_RESPONSES_ENABLED = {{ .Values.webClient.environmentVariables.CMS_RESPONSES_ENABLED | quote | default "false" }};
    window.STUDIO_INSPECTOR_ENABLED = {{ .Values.webClient.environmentVariables.STUDIO_INSPECTOR_ENABLED | quote | default "false" }};
    window.ASSISTANT_STATE_MANAGEMENT_ENABLED = {{ .Values.webClient.environmentVariables.ASSISTANT_STATE_MANAGEMENT_ENABLED | quote | default "false" }};
    {{- with .Values.webClient.environmentVariables.CURRENT_VERSION_NUMBER }}
    window.CURRENT_VERSION_NUMBER = {{ . | quote | trim }};
    {{- else }}
    window.CURRENT_VERSION_NUMBER = {{ .Values.tag | quote | trim }};
    {{- end }}
