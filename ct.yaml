target-branch: main
chart-dirs:
  - charts
validate-maintainers: false
check-version-increment: true
debug: true
# Ensure clean uninstall is considered success
cleanup-on-fail: true

# Enhanced testing configuration
lint-conf: lintconf.yaml
chart-yaml-schema: chart_schema.yaml

# Test configuration
# Note: For a test to be considered successful, ALL phases must complete:
# 1. Install - Chart installs successfully
# 2. Test - All Helm tests pass
# 3. Uninstall - Chart can be cleanly removed
test-charts: true
install-charts: true
upgrade-charts: false

# Chart testing options
build-id: ${{ github.run_id }}
namespace: test-namespace
release-label: app.kubernetes.io/instance
timeout: 45m

# Parallel testing
parallel: true
parallel-max-workers: 4

# Test values files
additional-values:
  - charts/*/ci/test-values.yaml
  - charts/*/ci/test-values-*.yaml

# Skip charts that don't need testing
skip-missing-values: true
